<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The social jetlag computation • mctq</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The social jetlag computation">
<meta name="description" content="This article provides notes on different approaches to computing social jetlag for the Munich ChronoType Questionnaire (MCTQ). It also explains how the  'method' argument in the 'sjl_rel()', 'sjl()', 'sjl_sc_rel()', and 'sjl_sc()'  functions works.
">
<meta property="og:description" content="This article provides notes on different approaches to computing social jetlag for the Munich ChronoType Questionnaire (MCTQ). It also explains how the  'method' argument in the 'sjl_rel()', 'sjl()', 'sjl_sc_rel()', and 'sjl_sc()'  functions works.
">
<meta property="og:image" content="https://docs.ropensci.org/mctq/logo.png">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">mctq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.2.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/mctq.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/missing-sections.html">Dealing with missing sections</a></li>
    <li><a class="dropdown-item" href="../articles/sjl-computation.html">The social jetlag computation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/mctq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>The social jetlag computation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/mctq/blob/master/vignettes/sjl-computation.Rmd" class="external-link"><code>vignettes/sjl-computation.Rmd</code></a></small>
      <div class="d-none name"><code>sjl-computation.Rmd</code></div>
    </div>

    
    
<p>This article provides notes on different approaches to computing
social jetlag (<span class="math inline">\(SJL\)</span>) for the Munich
ChronoType Questionnaire (MCTQ). It also explains how the
<code>method</code> argument in the <code><a href="../reference/sjl.html">sjl_rel()</a></code>,
<code><a href="../reference/sjl.html">sjl()</a></code>, <code><a href="../reference/sjl_sc.html">sjl_sc_rel()</a></code>, and <code><a href="../reference/sjl_sc.html">sjl_sc()</a></code>
functions works.</p>
<p>It’s helpful to have the standard MCTQ questionnaire and the
guidelines for standard MCTQ variable computation open while reading
this article. This will enhance your understanding of the data objects
discussed. You can download the MCTQ full standard version <a href="https://www.thewep.org/documentations/mctq/item/english-mctq-full" class="external-link">here</a>
and the guidelines for standard MCTQ variables <a href="https://www.thewep.org/documentations/mctq/item/mctq-variables" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="the-two-intervals-problem">The two intervals problem<a class="anchor" aria-label="anchor" href="#the-two-intervals-problem"></a>
</h2>
<p>According to Roenneberg et al. (<a href="https://doi.org/10.1016/j.cub.2012.03.038" class="external-link">2012</a>), the relative
social jetlag (<span class="math inline">\(SJL_{ rel}\)</span>), i.e.,
the discrepancy between social and biological time, must be computed as
the difference between <span class="math inline">\(MSF\)</span> (local
time of mid-sleep on work-free days) and <span class="math inline">\(MSW\)</span> (local time of mid-sleep on
workdays).</p>
<p><span class="math display">\[SJL_{rel} = MSF - MSW\]</span></p>
<p>This simple equation seems trivial until you consider that it deals
with two time values detached from a timeline. In other words, <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> represent two moments in different
contexts (workdays and work-free days).</p>
<p>If you dive into the MCTQ articles, you can see that this computation
have two objectives:</p>
<ol style="list-style-type: decimal">
<li><p>Represent the distance between <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> (i.e., the discrepancy).</p></li>
<li><p>Establish what value comes before or after the other,
representing that with a <span class="math inline">\(+/-\)</span>
signal. That is, when <span class="math inline">\(MSW\)</span> comes
before <span class="math inline">\(MSF\)</span>, <span class="math inline">\(SJL_{rel}\)</span> must be positive, and when
<span class="math inline">\(MSW\)</span> comes after <span class="math inline">\(MSF\)</span>, <span class="math inline">\(SJL_{rel}\)</span> must be negative.</p></li>
<li><p>To represent the distance between <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> (i.e., the discrepancy).</p></li>
<li><p>To establish what value comes before or after the other,
representing that with a <span class="math inline">\(+/-\)</span>
signal. That is, when <span class="math inline">\(MSW\)</span> comes
before <span class="math inline">\(MSF\)</span>, <span class="math inline">\(SJL_{rel}\)</span> must be positive, and when
<span class="math inline">\(MSW\)</span> comes after <span class="math inline">\(MSF\)</span>, <span class="math inline">\(SJL_{rel}\)</span> must be negative.</p></li>
</ol>
<p>You can find the rationale about the <span class="math inline">\(SJL_{rel}\)</span> signal in Roenneberg et al. (<a href="https://doi.org/10.3390/biology8030054" class="external-link">2019</a>) (see item “3.2
Social Jetlag Computation”).</p>
<p>Most people have some trouble understanding this. To illustrate what
we mean, let’s visualize a timeline overlapping an <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> value:</p>
<pre><code>             day 1                        day 2
    MSF                MSW       MSF                MSW
   05:00              21:00     05:00              21:00
-----|------------------|---------|------------------|-----&gt;
              16h           8h             16h
          longer int.  shorter int.    longer int.
</code></pre>
<p>Note that, while doing the representation above, we’re dealing with
the assumption that <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> can be represented in a two-day
timeline since people don’t usually sleep more than 24 hours (basic
assumption).</p>
<p>As you can see, by overlapping two time values in a two-day timeline,
we need to make a choice of what interval to use. For most people <span class="math inline">\(MSF\)</span> and <span class="math inline">\(MSW\)</span> are close to each other, so, usually,
we are looking for the shorter interval between the two. But, in some
extreme cases, usually when dealing with shift workers, <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> distance can surpass 12 hours, making
the longer interval the correct answer.</p>
<p>To obtain the <span class="math inline">\(SJL_{rel}\)</span> signal
we must check the start value of the interval. If the interval between
<span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> starts with <span class="math inline">\(MSW\)</span>, that means that <span class="math inline">\(MSW\)</span> comes before <span class="math inline">\(MSF\)</span>, hence, the signal must be positive.
Else, if the interval between <span class="math inline">\(MSW\)</span>
and <span class="math inline">\(MSF\)</span> starts with <span class="math inline">\(MSF\)</span>, that means that <span class="math inline">\(MSW\)</span> comes after <span class="math inline">\(MSF\)</span>, hence, the signal must be
negative.</p>
<ul>
<li>Example 1: when <span class="math inline">\(MSF - MSW\)</span> makes
a <strong>positive</strong> <span class="math inline">\(SJL_{rel}\)</span>
</li>
</ul>
<pre><code>             day 1                        day 2
                       MSW       MSF                
                      21:00     05:00
------------------------|---------|------------------------&gt;
</code></pre>
<ul>
<li>Example 2: when <span class="math inline">\(MSF - MSW\)</span> makes
a <strong>negative</strong> <span class="math inline">\(SJL_{rel}\)</span>
</li>
</ul>
<pre><code>             day 1                        day 2
                       MSF       MSW                
                      21:00     05:00
------------------------|---------|------------------------&gt;
</code></pre>
<p>We call this the <strong>two intervals problem</strong>. It
represents an unsolvable mathematical scenario, if you deprive it of the
respondent context. That can generate minor errors when computing <span class="math inline">\(SJL\)</span>, especially if you’re dealing with
large datasets.</p>
</div>
<div class="section level2">
<h2 id="methods-for-computing-sjl">Methods for computing <span class="math inline">\(SJL\)</span><a class="anchor" aria-label="anchor" href="#methods-for-computing-sjl"></a>
</h2>
<p>the <code><a href="../reference/sjl.html">sjl_rel()</a></code>, <code><a href="../reference/sjl.html">sjl()</a></code>,
<code><a href="../reference/sjl_sc.html">sjl_sc_rel()</a></code>, and <code><a href="../reference/sjl_sc.html">sjl_sc()</a></code> functions provides
an argument called <code>method</code> that allows you to choose three
different methods to deal with the two intervals problem. Here’s how
they work.</p>
<p>The <code><a href="../reference/sjl.html">sjl()</a></code> function will be used in the examples, but the
same logic apply to the other <code>sjl</code> functions.</p>
<div class="section level3">
<h3 id="method-difference">
<code>method = "difference"</code><a class="anchor" aria-label="anchor" href="#method-difference"></a>
</h3>
<p>By using <code>method = "difference"</code>, <code><a href="../reference/sjl.html">sjl()</a></code> will
do the exact computation proposed by the MCTQ authors, i.e., <span class="math inline">\(SJL\)</span> will be computed as the linear
difference between <span class="math inline">\(MSF\)</span> and <span class="math inline">\(MSW\)</span>.</p>
<p>Let’s see some examples using this method.</p>
<ul>
<li>Example 3: using the <code>"difference"</code> method</li>
</ul>
<p><span class="math inline">\(MSW = \text{04:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{06:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: +
02:00}\)</span></p>
<p><span class="math inline">\(MSF - MSW = \text{06:00} - \text{04:00} =
\text{+ 02:00}\)</span> (<strong>right</strong>)</p>
<ul>
<li>Example 4: using the <code>"difference"</code> method</li>
</ul>
<p><span class="math inline">\(MSW = \text{23:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{03:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: +
04:00}\)</span></p>
<p><span class="math inline">\(MSF - MSW = \text{03:00} - \text{23:00} =
\text{- 20:00}\)</span> (<strong>wrong</strong>)</p>
<p>As you can see with the second example, the <code>"difference"</code>
method uses a linear time frame approach, creating problems regarding
the circularity of time.</p>
</div>
<div class="section level3">
<h3 id="method-shorter-default-method">
<code>method = "shorter"</code> (default method)<a class="anchor" aria-label="anchor" href="#method-shorter-default-method"></a>
</h3>
<p>By using <code>method = "shorter"</code>, <code><a href="../reference/sjl.html">sjl()</a></code> uses the
shorter interval between <span class="math inline">\(MSW\)</span> and
<span class="math inline">\(MSF\)</span>.</p>
<p>This is the most reliable method we found to compute <span class="math inline">\(SJL\)</span>, considering the context of the MCTQ
data. However, it comes with a limitation: when <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> values distance themselves by more
than 12 hours, <code><a href="../reference/sjl.html">sjl()</a></code> can return a wrong output. From our
experience with MCTQ data, a <span class="math inline">\(SJL\)</span>
greater than 12 hours is highly improbable.</p>
<p>Let’s see some examples using this method.</p>
<ul>
<li>Example 5: using the <code>"shorter"</code> method</li>
</ul>
<p><span class="math inline">\(MSW = \text{04:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{06:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: +
02:00}\)</span></p>
<pre><code>             day 1                        day 2
    MSF                MSW       MSF                MSW
   06:00              04:00     06:00              04:00
-----|------------------|---------|------------------|-----&gt;
             22h            2h             22h
         longer int.   shorter int.    longer int.
</code></pre>
<p>By using the shorter interval, <span class="math inline">\(MSW\)</span> comes before <span class="math inline">\(MSF\)</span>, so <span class="math inline">\(SJL_{rel}\)</span> must be equal to <span class="math inline">\(\text{+ 02:00}\)</span>
(<strong>right</strong>).</p>
<ul>
<li>Example 6: using the <code>"shorter"</code> method</li>
</ul>
<p><span class="math inline">\(MSW = \text{23:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{03:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: +
04:00}\)</span></p>
<pre><code>             day 1                        day 2
    MSF                MSW       MSF                MSW
   03:00              23:00     03:00              23:00
-----|------------------|---------|------------------|-----&gt;
             20h            4h             20h
         longer int.   shorter int.    longer int.
</code></pre>
<p>By using the shorter interval, <span class="math inline">\(MSW\)</span> comes before <span class="math inline">\(MSF\)</span>, so <span class="math inline">\(SJL_{rel}\)</span> must be equal to <span class="math inline">\(\text{+ 04:00}\)</span>
(<strong>right</strong>).</p>
<ul>
<li>Example 7: when the <code>"shorter"</code> method fails</li>
</ul>
<p><span class="math inline">\(MSW = \text{12:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{23:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: -
13:00}\)</span></p>
<pre><code>             day 1                        day 2
    MSW                     MSF                      MSW
   12:00                   23:00                    12:00
-----|-----------------------|------------------------|-----&gt;
               11h                       13h
           shorter int.              longer int.
</code></pre>
<p>By using the shorter interval, <span class="math inline">\(MSW\)</span> comes before <span class="math inline">\(MSF\)</span>, so <span class="math inline">\(SJL_{rel}\)</span> must be equal to <span class="math inline">\(\text{+ 11:00}\)</span>
(<strong>wrong</strong>).</p>
<p>You can see example 7 in the <code>shift_mctq</code> dataset provided
by the <code>mctq</code> package (ID 39, on and after night shifts).
That’s the only MCTQ<span class="math inline">\(^{Shift}\)</span> case
in <code>shift_mctq</code> where we think that the
<code>"shorter"</code> method would fail.</p>
</div>
<div class="section level3">
<h3 id="method-longer">
<code>method = "longer"</code><a class="anchor" aria-label="anchor" href="#method-longer"></a>
</h3>
<p>By using <code>method = "longer"</code>, <code><a href="../reference/sjl.html">sjl()</a></code> uses the
longer interval between <span class="math inline">\(MSW\)</span> and
<span class="math inline">\(MSF\)</span>. It’s just the opposite of the
<code>"shorter"</code> method showed above.</p>
</div>
</div>
<div class="section level2">
<h2 id="so-what-method-should-i-use">So, what method should I use?<a class="anchor" aria-label="anchor" href="#so-what-method-should-i-use"></a>
</h2>
<p>We recommend that you always use the <code>"shorter"</code> method
when computing <span class="math inline">\(SJL_{rel}\)</span> or <span class="math inline">\(SJL\)</span> (the default <code><a href="../reference/sjl.html">sjl()</a></code>
method).</p>
<p>In our tests, the <code>"shorter"</code> method demonstrated to be
almost fail-safe. You just need to worry about the <span class="math inline">\(SJL\)</span> computation if you are dealing with
shift workers.</p>
<p>When dealing with a large MCTQ<span class="math inline">\(^{Shift}\)</span> dataset, it will be very
difficult to identify <span class="math inline">\(SJL\)</span> errors,
unless you look case by case and check the results with your
respondents. This is usually not a viable option. We recommend that you
mention which method you use to compute <span class="math inline">\(SJL\)</span> and add it as a possible limitation
of your results.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
